# Enterprise-Ready Platform Infrastructure

**Enterprise-ready Terraform-first platform** that deploys scalable Kubernetes infrastructure with secure credential management and GitOps - scales from single node to enterprise with the same code.

## üöÄ Quick Start

Deploy enterprise-ready Kubernetes platform from any Linux machine:

```bash
# Single command bootstrap - enterprise-ready Day 1
curl -sfL https://raw.githubusercontent.com/${GITHUB_ORG:-antonioacg}/infra-management/${GIT_REF:-main}/bootstrap.sh | GITHUB_TOKEN="ghp_xxx" bash -s -- --nodes=1 --tier=small
```

**Current Status**: Phases 0-1 complete and secure. Phases 2-4 planned for full GitOps integration.

## 5-Phase Bootstrap Process (0-4)

1. ‚úÖ **Phase 0**: Environment validation and tool installation
2. ‚úÖ **Phase 1**: k3s cluster + bootstrap storage (MinIO, PostgreSQL) with LOCAL state
3. ‚è≥ **Phase 2**: State migration + Vault (SoftHSMv2 auto-unseal) + External Secrets + Networking (REMOTE state)
4. ‚è≥ **Phase 3**: Advanced Vault policies and security configuration
5. ‚è≥ **Phase 4**: GitOps activation with Flux

**Enterprise Scaling**: `--nodes=1 --tier=small` to `--nodes=10 --tier=large` with same command

## Architecture

This bootstrap script orchestrates three repositories:

- **[deployments](https://github.com/antonioacg/deployments)** - Kubernetes manifests and Flux GitOps
- **[infra](https://github.com/antonioacg/infra)** - Terraform infrastructure and Vault configuration  
- **[infra-management](https://github.com/antonioacg/infra-management)** - This bootstrap orchestrator

## Prerequisites

**Hardware:**
- Any Linux machine (Raspberry Pi 4+, Ubuntu, CentOS, RHEL, etc.)
- 4GB+ RAM, 32GB+ storage, internet access
- Supports ARM64 and AMD64 architectures

**Credentials:**
- GitHub personal access token (`ghp_...`) with repo access
- All other credentials auto-generated by Terraform during bootstrap

**That's it!** - All tools installed automatically during bootstrap

## What You Get

After Phase 1 completes, you'll have **enterprise-ready foundation**:
- ‚úÖ **k3s cluster** with HA-ready configuration
- ‚úÖ **Bootstrap storage** (MinIO S3-compatible + PostgreSQL)
- ‚úÖ **Secure credential management** (in-memory only, no files)
- ‚úÖ **Terraform state backend** ready for infrastructure scaling
- ‚è≥ **Full platform** (Vault + GitOps) coming in Phases 2-4

## Documentation

**Start here:**
- [BOOTSTRAP.md](BOOTSTRAP.md) - Complete bootstrap process documentation and usage examples

## Verification

Check your Phase 1 deployment:

```bash
# Verify k3s cluster is running
kubectl get nodes

# Check bootstrap storage components
kubectl get pods -n bootstrap

# Verify MinIO and PostgreSQL are ready
kubectl get pvc -n bootstrap
```

## Support

For issues or questions:
- Check troubleshooting commands in workspace CLAUDE.md
- Review component logs: `kubectl logs -n <namespace> <pod-name>`  
- Verify prerequisites and retry bootstrap

## Security Model

**Zero-Secrets Architecture:**
- **Git Repositories**: No secrets ever committed (zero-secrets architecture)
- **Environment Variables**: Used only during bootstrap, then cleared automatically
- **Secret Management**: Vault + External Secrets for all ongoing operations
- **Flux Authentication**: Switches from bootstrap token to External Secrets automatically

**Infrastructure Independence**: Same security model from development Raspberry Pi to production enterprise cloud.